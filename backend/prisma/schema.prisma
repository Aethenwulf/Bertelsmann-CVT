generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
  schemas  = ["cvt"]
}

model departments {
  id          Int       @id @default(autoincrement())
  name        String    @unique @db.VarChar(100)
  description String?
  created_at  DateTime? @default(now()) @db.Timestamp(6)
  updated_at  DateTime? @default(now()) @db.Timestamp(6)
  is_deleted  Boolean?  @default(false)
  users       users[]

  @@schema("cvt")
}

model roles {
  id          Int       @id @default(autoincrement())
  name        String    @unique @db.VarChar(100)
  description String?
  created_at  DateTime? @default(now()) @db.Timestamp(6)
  updated_at  DateTime? @default(now()) @db.Timestamp(6)
  is_deleted  Boolean?  @default(false)
  users       users[]

  @@schema("cvt")
}

model users {
<<<<<<< HEAD
  id                Int             @id @default(autoincrement())
  first_name        String          @db.VarChar(100)
  last_name         String          @db.VarChar(100)
  email             String          @unique @db.VarChar(150)
  phone_country     String?         @db.VarChar(2)
  phone_number      String?         @db.VarChar(20)
  birthday          DateTime?       @db.Date
  department_id     Int?
  role_id           Int?
  country           String?         @db.VarChar(150)
  state             String?         @db.VarChar(150)
  city              String?         @db.VarChar(150)
  address_line      String?
  zip_code          String?         @db.VarChar(20)
  about             String?
  avatar_bytes      Bytes?
  avatar_mime       String?         @db.VarChar(50)
  avatar_size_bytes BigInt?
  is_public         Boolean?        @default(false)
  status            String?         @default("ACTIVE") @db.VarChar(20)
  last_seen         DateTime?       @db.Timestamp(6)
  last_login        DateTime?       @db.Timestamp(6)
  created_at        DateTime?       @default(now()) @db.Timestamp(6)
  updated_at        DateTime?       @default(now()) @db.Timestamp(6)
  profile_completed Boolean?        @default(false)
  is_deleted        Boolean?        @default(false)
  activity_logs     activity_logs[]
  user_auth         user_auth[]
  user_otp          user_otp[]
  departments       departments?    @relation(fields: [department_id], references: [id], onUpdate: NoAction)
  roles             roles?          @relation(fields: [role_id], references: [id], onUpdate: NoAction)

  @@schema("cvt")
=======
  id            Int          @id @default(autoincrement())
  first_name    String       @db.VarChar(100)
  last_name     String       @db.VarChar(100)
  email         String       @unique @db.VarChar(150)
  phone_number  String?      @db.VarChar(20)
  birthday      DateTime?    @db.Date
  role_id       Int?
  department_id Int?
  country       String?      @db.VarChar(150)
  state         String?      @db.VarChar(150)
  city          String?      @db.VarChar(150)
  avatar_url    String?
  address_line  String?
  zip_code      String?      @db.VarChar(20)
  about         String?
  is_public     Boolean?     @default(false)
  status        String?      @default("ACTIVE") @db.VarChar(20)
  last_seen     DateTime?    @db.Timestamp(6)
  last_login    DateTime?    @db.Timestamp(6)
  created_at    DateTime?    @default(now()) @db.Timestamp(6)
  updated_at    DateTime?    @default(now()) @db.Timestamp(6)
  is_deleted    Boolean?     @default(false)
  user_auth     user_auth[]
  departments   departments? @relation(fields: [department_id], references: [id], onUpdate: NoAction)
  roles         roles?       @relation(fields: [role_id], references: [id], onUpdate: NoAction)

  @@schema("cia")
>>>>>>> 3e3d961b1fc4c1ce188d5c9ff43441db48a19f62
}

model user_auth {
  id            Int       @id @default(autoincrement())
  user_id       Int
  username      String    @db.VarChar(100)
  password_hash String
  created_at    DateTime? @default(now()) @db.Timestamp(6)
  updated_at    DateTime? @default(now()) @db.Timestamp(6)
  is_deleted    Boolean?  @default(false)
  users         users     @relation(fields: [user_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

<<<<<<< HEAD
  @@index([username], map: "idx_user_auth_username")
  @@schema("cvt")
}

model user_otp {
  id          Int       @id @default(autoincrement())
  user_id     Int
  otp_code    String    @db.VarChar(10)
  expires_at  DateTime  @db.Timestamp(6)
  consumed_at DateTime? @db.Timestamp(6)
  created_at  DateTime? @default(now()) @db.Timestamp(6)
  users       users     @relation(fields: [user_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@index([user_id, expires_at], map: "idx_user_otp_user_expires")
  @@schema("cvt")
}

model activity_logs {
  log_id         Int       @id @default(autoincrement())
  user_id        Int?
  action_type    String    @db.VarChar(20)
  table_name     String?   @db.VarChar(100)
  record_id      Int?
  changed_fields String[]
  machine_id     String?
  device_type    String?   @db.VarChar(50)
  ip_address     String?   @db.VarChar(255)
  created_at     DateTime? @default(now()) @db.Timestamp(6)
  users          users?    @relation(fields: [user_id], references: [id], onUpdate: NoAction)

  @@index([created_at], map: "idx_activity_logs_created_at")
  @@index([table_name, record_id], map: "idx_activity_logs_table_record")
  @@index([user_id], map: "idx_activity_logs_user_id")
  @@schema("cvt")
=======
  @@schema("cia")
>>>>>>> 3e3d961b1fc4c1ce188d5c9ff43441db48a19f62
}
